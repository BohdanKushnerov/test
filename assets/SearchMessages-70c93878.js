import{r as u,u as d,q as f,w as g,h as p,o as j,f as S,i as M,j as e}from"./index-cfb00355.js";import{b as N,s as y,A as v}from"./useResizeWindow-5917eeb9.js";import{S as k}from"./SearchMsgsInput-8343bb00.js";const z=()=>{const[t,n]=u.useState(""),[a,o]=u.useState(null),{chatUID:l}=d(r=>r.currentChatInfo);return u.useEffect(()=>{if(!t){o(null);return}const r=f(p(S,`chats/${l}/messages`),g("message",">=",t),g("message","<=",t+"ï£¿")),h=j(r,i=>{o(i.docs)});return()=>{h()}},[l,t]),{searchMessages:a,searchMessageValue:t,setSearchMessageValue:n}};function U(t){const n=localStorage.getItem("language");if(n){const a=new Date(t),o=a.getDate(),l=a.toLocaleString(n==="ua"?"uk":n,{month:"short"}),r=a.getFullYear(),h=a.getHours(),i=a.getMinutes();return`${o} ${l} ${r}, ${h}:${i<10?"0":""}${i}`}}const I=({setIsShowSearchMessages:t})=>{const{t:n}=M(),{userUID:a}=d(s=>s.currentChatInfo),{photoURL:o,displayName:l}=d(s=>s.currentUser),{searchMessages:r,searchMessageValue:h,setSearchMessageValue:i}=z(),c=N(a),m=s=>{i(s.target.value)},x=()=>{t(!1)};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-around items-center gap-1",children:[e.jsx("button",{className:"flex justify-center items-center h-9 w-10 bg-transparent transition-all duration-300 hover:bg-zinc-400 hover:dark:bg-zinc-100/10 rounded-full cursor-pointer",onClick:x,children:e.jsx("svg",{className:"fill-zinc-600 dark:fill-zinc-400",width:16,height:16,children:e.jsx("use",{href:y+"#icon-cross-close"})})}),e.jsx(k,{value:h,handleChange:m,placeholderText:n("SearchMsgPlaceholder")})]}),r&&e.jsxs("ul",{className:"flex flex-col justify-center gap-2",children:[r.length===0&&e.jsx("p",{className:"text-zinc-600 dark:text-white",children:n("NotFoundMsg")}),r.map(s=>(console.log(s.data().senderUserID),e.jsxs("li",{className:"flex gap-2 justify-start items-center",children:[e.jsx("div",{children:e.jsx(v,{photoURL:s.data().senderUserID===a?c==null?void 0:c.photoURL:o,displayName:s.data().senderUserID===a?c==null?void 0:c.displayName:l,size:"50"})}),e.jsxs("div",{children:[e.jsx("p",{className:"max-w-xs break-all text-zinc-600 dark:text-zinc-300",children:s.data().message}),e.jsx("p",{className:"text-zinc-600 dark:text-white",children:s.data().date&&U(s.data().date.toDate().toString())})]})]},s.id)))]})]})};export{I as default};
