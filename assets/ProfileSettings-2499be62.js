import{b as r,c as S,n as R,e as T,f as E,Q as y,r as n,_ as L,i as _,u,j as e}from"./index-b48e6dac.js";import z from"./ButtonArrow-f139700d.js";import{T as A,A as j,s as N}from"./useResizeWindow-f5ffb2a2.js";import{u as D}from"./useStartTransition-68667600.js";import{L as B}from"./LoaderUIActions-96cbd80d.js";const I=async(s,o,l,i)=>{if(r.currentUser&&o)try{if(s.trim()==="")throw new Error("Empty name");await S(r.currentUser,{displayName:s}),r.currentUser&&l(r.currentUser),await R(T(E,"users",o),{displayName:s}),y.success(i("ChangeNameToastSuccess"))}catch(c){y.error(i("ChangeNameToastError")),console.log("handleClickChangeDisplayName error",c)}},M=n.lazy(()=>L(()=>import("./ProfileSettingsModal-ce9156f2.js"),["assets/ProfileSettingsModal-ce9156f2.js","assets/index-b48e6dac.js","assets/index-82baf9a3.css","assets/Line-dd9c0f3b.js","assets/useResizeWindow-f5ffb2a2.js","assets/ModalWindow-37df0ac3.js","assets/useCloseModal-266f730d.js","assets/ButtonClose-7ab1b53f.js","assets/v4-4a60fe23.js"])),q=()=>{const[s,o]=n.useState(()=>{var t;return(t=r.currentUser)==null?void 0:t.displayName}),[l,i]=n.useState(!1),c=n.useRef(null),a=n.useRef(null),{t:d}=_("translation",{keyPrefix:"ProfileSettings"}),b=D(),{uid:h,displayName:p}=u(t=>t.currentUser),w=u(t=>t.updateCurrentUser),C=u(t=>t.updateSidebarScreen);console.log("screen --> ProfileSettings");const U=()=>{C("default")},k=t=>{o(t.target.value)},f=()=>{i(t=>!t),l&&a.current&&(a.current.value="")},v=t=>{t.target.files&&t.target.files.length!==0&&f()},P=()=>{a.current&&a.current.click()};return e.jsx(A,{nodeRef:c,in:b,timeout:300,unmountOnExit:!0,children:t=>{var x,m,g;return e.jsxs("div",{ref:c,className:`absolute top-0 left-0 w-full transform origin-top-left transition-transform 
                  ${t==="exited"?"hidden":""}
                  ${t==="entered"?"rotate-0 translate-x-0":"rotate-180 -translate-x-1/2 duration-300"}
                  `,children:[e.jsx(z,{handleClickButtonArrow:U}),e.jsxs("div",{className:"flex flex-col justify-center items-center gap-4",children:[e.jsx("input",{style:{display:"none"},type:"file",accept:"image/png, image/jpeg",ref:a,onChange:v}),e.jsx("div",{className:"relative group rounded-full cursor-pointer",onClick:P,children:(x=r.currentUser)!=null&&x.photoURL&&r.currentUser.displayName?e.jsxs(e.Fragment,{children:[e.jsx(j,{photoURL:r.currentUser.photoURL,displayName:r.currentUser.displayName,size:"200"}),e.jsx("svg",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 group-hover:scale-105 fill-white",width:48,height:48,children:e.jsx("use",{href:N+"#icon-photo-focus"})})]}):e.jsx(e.Fragment,{children:r.currentUser&&e.jsxs(e.Fragment,{children:[e.jsx(j,{photoURL:r.currentUser.photoURL,displayName:r.currentUser.displayName,size:"200"}),e.jsx("svg",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 group-hover:scale-105",width:48,height:48,children:e.jsx("use",{href:N+"#icon-photo-focus",fill:"#000000"})})]})})}),e.jsxs("div",{className:"flex gap-2 justify-center items-center text-white",children:[e.jsx("p",{className:"text-black dark:text-white",children:d("Phone")}),e.jsx("p",{className:"py-2 px-4 h-10 rounded-3xl bg-mySeacrhBcg text-white text-center cursor-default",children:(g=(m=r)==null?void 0:m.currentUser)==null?void 0:g.phoneNumber})]}),typeof s=="string"&&e.jsxs("div",{className:"flex flex-col gap-2 justify-center items-center text-white",children:[e.jsxs("div",{children:[e.jsx("input",{className:"py-2 px-8 h-10 w-full rounded-3xl bg-mySeacrhBcg text-white text-center outline-none border-2 border-transparent focus:border-solid focus:border-cyan-500",type:"text",value:s,onChange:k}),e.jsxs("p",{className:"text-center text-xs text-black dark:text-white",children:["⮴ ",d("ChangeNameNotify"),"⮵"]})]}),e.jsx("button",{className:`w-48 border-2 rounded-3xl ${p===s?"bg-transparent border-zinc-500 text-zinc-500":"bg-transparent text-black border-black dark:text-white dark:border-white hover:bg-zinc-400 hover:dark:bg-gray-800 cursor-pointer"} transition-all duration-300 hover:shadow-mainShadow `,onClick:()=>h!==null&&I(s,h,w,d),"aria-label":"Change display name",disabled:p===s,children:d("ChangeName")})]})]}),l&&e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:e.jsx(B,{size:200})}),children:e.jsx(M,{photoProfileInputRef:a,handleToggleProfilePhotoModal:f})})]})}})};export{q as default};
